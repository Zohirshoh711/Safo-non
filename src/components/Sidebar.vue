<template>
  <aside class="sidebar">
    <div class="pad">
      <div class="sidebar-header">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="175"
          height="19"
          viewBox="0 0 191 19"
          fill="none"
        >
          <path
            d="M16.85 15.97C18.19 15.97 18.86 15.21 18.86 13.69C18.86 12.17 18.19 11.41 16.85 11.41H16.58V8.41C18.34 8.41 19.67 8.76 20.57 9.46C21.47 10.16 21.92 11.26 21.92 12.76V14.53C21.92 16.03 21.5 17.15 20.66 17.89C19.82 18.63 18.49 19 16.67 19H0.71V15.97H16.85ZM5.78 3.85C4.44 3.85 3.77 4.61 3.77 6.13C3.77 7.65 4.44 8.41 5.78 8.41H6.05V11.41C2.49 11.41 0.71 9.96 0.71 7.06V5.29C0.71 2.31 2.47 0.82 5.99 0.82H21.92V3.85H5.78ZM47.4287 19H43.8587L36.2387 4.45L28.5887 19H25.0787L32.9087 3.88C33.5287 2.68 34.1187 1.88 34.6787 1.48C35.2387 1.08 35.6987 0.879999 36.0587 0.879999H36.5087C36.6887 0.879999 36.8887 0.919999 37.1087 0.999999C37.3287 1.08 37.5687 1.24 37.8287 1.48C38.0887 1.7 38.3687 2.01 38.6687 2.41C38.9687 2.79 39.2787 3.28 39.5987 3.88L47.4287 19ZM53.6621 19H50.5721V5.38C50.5721 4.76 50.6721 4.17 50.8721 3.61C51.0921 3.05 51.4121 2.57 51.8321 2.17C52.2521 1.75 52.7821 1.42 53.4221 1.18C54.0821 0.939999 54.8521 0.82 55.7321 0.82H71.8121V3.85H55.7321C55.0721 3.85 54.5521 4.04 54.1721 4.42C53.7921 4.78 53.6021 5.34 53.6021 6.1V8.41H71.8121V11.44H53.6621V19ZM87.0901 19H86.0401C84.2601 19 82.7301 18.84 81.4501 18.52C80.1701 18.18 79.1101 17.65 78.2701 16.93C77.4501 16.21 76.8401 15.28 76.4401 14.14C76.0401 13 75.8401 11.62 75.8401 10C75.8401 6.86 76.6601 4.55 78.3001 3.07C79.9601 1.57 82.5501 0.82 86.0701 0.82H87.0601C90.5601 0.82 93.1401 1.57 94.8001 3.07C96.4601 4.55 97.2901 6.86 97.2901 10C97.2901 11.62 97.0901 13 96.6901 14.14C96.2901 15.28 95.6701 16.21 94.8301 16.93C94.0101 17.65 92.9501 18.18 91.6501 18.52C90.3701 18.84 88.8501 19 87.0901 19ZM87.0601 3.85H86.1901C83.6501 3.85 81.8001 4.37 80.6401 5.41C79.4801 6.43 78.9001 7.95 78.9001 9.97C78.9001 12.01 79.4701 13.52 80.6101 14.5C81.7701 15.48 83.6201 15.97 86.1601 15.97H86.9701C89.5101 15.97 91.3501 15.49 92.4901 14.53C93.6501 13.55 94.2301 12.04 94.2301 10C94.2301 8 93.6501 6.48 92.4901 5.44C91.3501 4.4 89.5401 3.87 87.0601 3.85ZM114.783 11.44H101.313V8.41H114.783V11.44ZM135.407 17.35L121.847 5.05V19H118.817V2.68C118.817 1.44 119.327 0.82 120.347 0.82H121.037C121.317 0.859999 121.607 0.959999 121.907 1.12C122.207 1.28 122.567 1.52 122.987 1.84L137.027 14.59V0.82H140.057V17.17C140.057 18.39 139.557 19 138.557 19H138.047C137.767 18.94 137.397 18.78 136.937 18.52C136.477 18.26 135.967 17.87 135.407 17.35ZM155.335 19H154.285C152.505 19 150.975 18.84 149.695 18.52C148.415 18.18 147.355 17.65 146.515 16.93C145.695 16.21 145.085 15.28 144.685 14.14C144.285 13 144.085 11.62 144.085 10C144.085 6.86 144.905 4.55 146.545 3.07C148.205 1.57 150.795 0.82 154.315 0.82H155.305C158.805 0.82 161.385 1.57 163.045 3.07C164.705 4.55 165.535 6.86 165.535 10C165.535 11.62 165.335 13 164.935 14.14C164.535 15.28 163.915 16.21 163.075 16.93C162.255 17.65 161.195 18.18 159.895 18.52C158.615 18.84 157.095 19 155.335 19ZM155.305 3.85H154.435C151.895 3.85 150.045 4.37 148.885 5.41C147.725 6.43 147.145 7.95 147.145 9.97C147.145 12.01 147.715 13.52 148.855 14.5C150.015 15.48 151.865 15.97 154.405 15.97H155.215C157.755 15.97 159.595 15.49 160.735 14.53C161.895 13.55 162.475 12.04 162.475 10C162.475 8 161.895 6.48 160.735 5.44C159.595 4.4 157.785 3.87 155.305 3.85ZM186.148 17.35L172.588 5.05V19H169.558V2.68C169.558 1.44 170.068 0.82 171.088 0.82H171.778C172.058 0.859999 172.348 0.959999 172.648 1.12C172.948 1.28 173.308 1.52 173.728 1.84L187.768 14.59V0.82H190.798V17.17C190.798 18.39 190.298 19 189.298 19H188.788C188.508 18.94 188.138 18.78 187.678 18.52C187.218 18.26 186.708 17.87 186.148 17.35Z"
            fill="#5565FF"
          ></path>
        </svg>
      </div>

      <nav class="sidebar-nav">
        <a
          v-for="item in filteredMenuItems"
          :key="item.id"
          href="#"
          class="nav-item"
          :class="{ 'nav-item-active': item.id === activeMenu }"
          @click.prevent="handleMenuClick(item)"
        >
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path :d="item.iconPath"></path>
          </svg>
          <span>{{ item.name }}</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="user-profile">
          <span class="user-name">{{ username }}</span>
          <button @click="$emit('logout')" class="logout-button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16,17 21,12 16,7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </aside>
</template>

<script>
export default {
  name: "Sidebar",
  props: {
    activeMenu: {
      type: String,
      required: true,
    },
    username: {
      type: String,
      required: true,
    },
    userRole: {
      type: String,
      required: true,
    },
  },
  
  data() {
    return {
      menuItems: [
        {
          id: 'dashboard',
          name: 'Dashboard',
          iconPath: 'm2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25',
          view: 'dashboard'
        },
        {
          id: 'managers',
          name: 'Managerlar',
          iconPath: 'M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z',
          view: 'managers',
          adminOnly: true
        },
        {
          id: 'novvoylar',
          name: 'Novvoylar',
          iconPath: 'M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z',
          view: 'novvoylar'
        },
        {
          id: 'dokonlar',
          name: 'Dokonlar',
          iconPath: 'M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22ZM20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22ZM1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6',
          view: 'dokonlar'
        },
        {
          id: 'yetkazuvchilar',
          name: 'Yetkazuvchilar',
          iconPath: 'M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12',
          view: 'yetkazuvchilar'

        },
        {
          id: 'omborxona',
          name: 'Omborxona',
          iconPath: 'M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819',
          view: 'omborxona'
          

        },
        {
          id: 'chiqimlar',
          name: 'Chiqimlar',
          iconPath: 'M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14',
          view: 'chiqimlar'
        },
        {
          id: 'non-turlari',
          name: 'Non turlari',
          iconPath: 'M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z',
          view: 'nonturlari'
        },
        {
          id: 'sozlamalar',
          name: 'Sozlamalar',
          iconPath: 'M12 15a3 3 0 100-6 3 3 0 000 6z M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z',
          view: 'sozlamalar'
        }
      ]
    }
  },
  computed: {
    filteredMenuItems() {
      return this.menuItems.filter((item) => {
        if (item.adminOnly && this.userRole !== "admin") {
          return false;
        }
        return true;
      });
    },
  },
  methods: {
    handleMenuClick(item) {
      console.log('Menu clicked:', item.id, 'View:', item.view)
      this.$emit('navigate', item.view)
    }
  }
};
</script>

<style scoped>
.sidebar {
  width: 320px;
  background-color: white;
  border-right: 1px solid #e2e8f0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.pad {
  width: 260px;
  height: 100%;
  border: 1.5px solid rgb(231, 231, 231);
  border-radius: 15px;
  padding: 20px;
}

.sidebar-header {
  padding: 24px;
  border-bottom: 1px solid #e2e8f0;
}

.sidebar-nav {
  width: 100%;
  height: 80%;
  padding: 16px 0;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 24px;
  color: #64748b;
  text-decoration: none;
  transition: all 0.2s;
  border-left: 3px solid transparent;
  border-radius: 12px;
}

.nav-item:hover {
  background-color: #f1f5f9;
  color: #334155;
}

.nav-item-active {
  background-color: #6598FF;
  color: white;
  border-radius: 12px;
}

.nav-icon {
  width: 25px;
  height: 25px;
  color: black;
}

.sidebar-footer {
  padding: 16px;
  border-top: 1px solid #e2e8f0;
}

.user-profile {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px;
  background-color: #f8fafc;
  border-radius: 8px;
}

.user-name {
  font-weight: 500;
  color: #334155;
}

.logout-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 4px;
  color: #64748b;
  transition: all 0.2s;
}

.logout-button:hover {
  background-color: #e2e8f0;
  color: #334155;
}

.logout-button svg {
  width: 16px;
  height: 16px;
}

@media (max-width: 1024px) {
  .sidebar {
    width: 200px;
  }
}

@media (max-width: 768px) {
  .sidebar {
    width: 100%;
    height: auto;
  }
}
</style>